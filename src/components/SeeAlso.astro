---
import {
  SupportedLanguages,
  SupportedLanguagesNames,
  useI18n,
} from "../i18n/ui"

import { getRelativeLocaleUrl } from "astro:i18n"
import { useTranslations } from "../i18n/utils"

const { lang } = useI18n(Astro.url)

const {
  lang: nextLang,
  name,
  seeAlsoText,
} = (() => {
  const id = SupportedLanguages.indexOf(lang)
  const len = SupportedLanguages.length
  const next = SupportedLanguages.at((id + 1) % len)!
  const seeAlsoText = useTranslations(next)("nav.seeAlso")

  return {
    name: SupportedLanguagesNames[next],
    lang: next,
    seeAlsoText: seeAlsoText,
  }
})()
---

<a
  class="group/link absolute left-8 bottom-8 tracking-tighter"
  href={getRelativeLocaleUrl(nextLang, "./")}
>
  {seeAlsoText}
  <span
    class="transition-all from-neutral-500 to-neutral-300 via-neutral-400 bg-clip-text text-transparent bg-gradient-to-bl tracking-normal font-semibold"
  >
    {name}
  </span>
</a>
