---
import Floater from "./Floater.astro";
---

<>
  <script>
    let rng = Math.random;
    const reposition = (e: HTMLDivElement) => {
      const { innerWidth: ww, innerHeight: wh } = window;

      let cw = e.clientWidth;
      let ch = e.clientHeight;

      e.style.right = `${rng() * (ww - cw)}px`;
      e.style.bottom = `${rng() * (wh - ch)}px`;
    };

    let i = 0;

    for (
      let b = document.getElementById(`float${i}`);
      b !== null;
      b = document.getElementById(`float${i}`)
    ) {
      console.info(`DIV [${b.id}]`);
      reposition(b as HTMLDivElement);

      b.addEventListener("animationiteration", (ev) => {
        reposition(ev.currentTarget as HTMLDivElement);
      });
      i++;
    }
  </script>
  <Floater id="float0" />
  <Floater id="float1" />
  <Floater id="float2" />
  <Floater id="float3" />
  <Floater id="float4" />
</>
